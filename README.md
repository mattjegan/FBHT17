# Facebook Hackathon 2017 Backend

## Requirements
* Python 3.5+
* Virtualenv

## Setup
```
# Clone the repository
git clone https://github.com/mattjegan/FBHT17
cd FBHT17

# Create a virtualenv
virtualenv venv -p python3

# Activate the virtualenv
source venv/bin/activate

# Install all other requirements
pip install -r requirements.txt

# Run the backend
python fbht17/manage.py runserver
```

## API Docs
## Steps
### List Steps
GET /steps
```
[
  {
    "id": 1,
    "type": "camera",
    "desc": "Take a picture of Bondi beach",
    "cost": 0.30
  }
]
```
### Create Step
POST /steps
```
{
  "type": "camera",
  "desc": "Take a picture of Bondi beach",
  "cost": 0.30
}
```
Response
```
{
  "id": 1,
  "type": "camera",
  "desc": "Take a picture of Bondi beach",
  "cost": 0.30
}
```
### Get Step
GET /steps/:step_id
```
{
  "id": 1,
  "type": "camera",
  "desc": "Take a picture of Bondi beach",
  "cost": 0.30
}
```

## Missions
### List Missions
GET /missions
```
[
  {
    "id": 1,
    "name": "My Sunday Mission",
    "lat": 0.5555,
    "long": 0.5555,
    "author": 1, // Profile ID
    "desc": "I need my mission completed",
    "cost": 1.20, // Total cost of steps
    "num_users": 5,
    "expire": "2008-09-15T15:53:00", // Default: 1hr after creation, no timezone info
    "active": true
  }
]
```
### Create Mission
POST /missions
```
{
  "name": "My Sunday Mission",
  "lat": 0.5555,
  "long": 0.5555,
  "author": 1,
  "desc": "I need my mission completed",
  "cost": 1.20,
  "num_users": 5,
  "expire": "2008-09-15T15:53:00",
  "active": true
}
```
Response
```
{
  "id": 1,
  "name": "My Sunday Mission",
  "lat": 0.5555,
  "long": 0.5555,
  "author": 1,
  "desc": "I need my mission completed",
  "cost": 1.20,
  "num_users": 5,
  "expire": "2008-09-15T15:53:00",
  "active": true
}
```
### Get Mission
GET /missions/:mission_id
```
{
  "id": 1,
  "name": "My Sunday Mission",
  "lat": 0.5555,
  "long": 0.5555,
  "author": 1,
  "desc": "I need my mission completed",
  "cost": 1.20,
  "num_users": 5,
  "expire": "2008-09-15T15:53:00",
  "active": true
}
```

## Profiles
### List Profiles
GET /profiles
```
[
  {
    "id": 1,
    "user": 1, // User ID
    "first_name": "Bobby",
    "last_name": "Droptables",
    "current_mission": 1, // Mission ID
    "completed_missions": [2, 3, 4], // Mission IDs
    "expired_missions": [5, 6, 7], // Mission IDs
    "active_missions": [8, 9, 10], // Mission IDs
    "amount": 31.45
  }
]
```
### Create Profile
POST /profiles
```
{
  "user": 1,
  "first_name": "Bobby",
  "last_name": "Droptables",
  "current_mission": 1,
  "completed_missions": [2, 3, 4],
  "expired_missions": [5, 6, 7],
  "active_missions": [8, 9, 10],
  "amount": 31.45
}
```
Response
```
{
  "id": 1,
  "user": 1,
  "first_name": "Bobby",
  "last_name": "Droptables",
  "current_mission": 1,
  "completed_missions": [2, 3, 4],
  "expired_missions": [5, 6, 7],
  "active_missions": [8, 9, 10],
  "amount": 31.45
}
```
### Get Profile
GET /profiles/:profile_id
```
{
  "id": 1,
  "user": 1,
  "first_name": "Bobby",
  "last_name": "Droptables",
  "current_mission": 1,
  "completed_missions": [2, 3, 4],
  "expired_missions": [5, 6, 7],
  "active_missions": [8, 9, 10],
  "amount": 31.45
}
```

## Results
### List Results
GET /results
```
[
  {
    "id": 1,
    "user": 1, // User ID
    "step": 1, // Step ID
    "content": "My evidence here" // Base64 Encoded images or just plain string,
    "completed": "2008-09-15T15:53:00" // Generated by the API on creation
  }
]
```
### Create Result
POST /results
```
{
  "user": 1,
  "step": 1,
  "content": "My evidence here"
}
```
Response
```
{
  "id": 1,
  "user": 1,
  "step": 1,
  "content": "My evidence here",
  "completed": "2008-09-15T15:53:00"
}
```
### Get Result
GET /results/:result_id
```
{
  "id": 1,
  "user": 1,
  "step": 1,
  "content": "My evidence here",
  "completed": "2008-09-15T15:53:00"
}
```

## Auth
### Register New User
### Get Auth Token